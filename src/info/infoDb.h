/***********************************************************************************************************************************
InfoDb Handler for pgbackrest information
***********************************************************************************************************************************/
#ifndef INFO_INFODB_H
#define INFO_INFODB_H

#include <stdint.h>

/***********************************************************************************************************************************
InfoDb object
***********************************************************************************************************************************/
typedef struct InfoDb InfoDb;

/***********************************************************************************************************************************
InfoDb Postgres data object
***********************************************************************************************************************************/
typedef struct InfoDbData
{
    unsigned int dbId;
    unsigned int dbCatalogVersion;
    unsigned int dbControlVersion;
    uint64_t dbSystemId;
    unsigned char *dbVersion;
} InfoDbData;

/***********************************************************************************************************************************
Info types for determining data in DB section
***********************************************************************************************************************************/
typedef enum
{
    infoDbArchive,                                                  // archive info file
    infoDbBackup,                                                   // backup info file
    infoDbManifest,                                                 // manifest file
} InfoDbType;

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/
InfoDb *infoDbNew(String *fileName, const bool loadFile, const bool ignoreMissing, InfoDbType type);

void infoDbFree(InfoDb *this);

#endif
