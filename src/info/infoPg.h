/***********************************************************************************************************************************
InfoPg Handler for pgbackrest information
***********************************************************************************************************************************/
#ifndef INFO_INFOPG_H
#define INFO_INFOPG_H

#include <stdint.h>

/***********************************************************************************************************************************
InfoPg object
***********************************************************************************************************************************/
typedef struct InfoPg InfoPg;

/***********************************************************************************************************************************
InfoPg Postgres data object
***********************************************************************************************************************************/
typedef struct InfoPgData
{
    unsigned int dbId;
    unsigned int dbCatalogVersion;
    unsigned int dbControlVersion;
    uint64_t dbSystemId;
    unsigned char *dbVersion;
} InfoPgData;

/***********************************************************************************************************************************
Info types for determining data in DB section
***********************************************************************************************************************************/
typedef enum
{
    infoPgArchive,                                                  // archive info file
    infoPgBackup,                                                   // backup info file
    infoPgManifest,                                                 // manifest file
} InfoPgType;

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/
InfoPg *infoPgNew(String *fileName, const bool loadFile, const bool ignoreMissing, InfoPgType type);

void infoPgFree(InfoPg *this);

#endif
