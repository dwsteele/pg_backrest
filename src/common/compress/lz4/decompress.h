/***********************************************************************************************************************************
LZ4 Decompress

Decompress IO from the lz4 format.
***********************************************************************************************************************************/
#ifndef COMMON_COMPRESS_LZ4_DECOMPRESS_H
#define COMMON_COMPRESS_LZ4_DECOMPRESS_H

/***********************************************************************************************************************************
Object type
***********************************************************************************************************************************/
typedef struct Lz4Decompress Lz4Decompress;

#include "common/io/filter/filter.h"
#include "common/type/string.h"

/***********************************************************************************************************************************
Constructor
***********************************************************************************************************************************/
Lz4Decompress *lz4DecompressNew(bool raw);

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/
void lz4DecompressProcess(Lz4Decompress *this, const Buffer *compressed, Buffer *uncompressed);

/***********************************************************************************************************************************
Getters
***********************************************************************************************************************************/
bool lz4DecompressDone(const Lz4Decompress *this);
IoFilter *lz4DecompressFilter(const Lz4Decompress *this);
bool lz4DecompressInputSame(const Lz4Decompress *this);

/***********************************************************************************************************************************
Destructor
***********************************************************************************************************************************/
void lz4DecompressFree(Lz4Decompress *this);

/***********************************************************************************************************************************
Macros for function logging
***********************************************************************************************************************************/
String *lz4DecompressToLog(const Lz4Decompress *this);

#define FUNCTION_LOG_LZ4_DECOMPRESS_TYPE                                                                                          \
    Lz4Decompress *
#define FUNCTION_LOG_LZ4_DECOMPRESS_FORMAT(value, buffer, bufferSize)                                                             \
    FUNCTION_LOG_STRING_OBJECT_FORMAT(value, lz4DecompressToLog, buffer, bufferSize)

#endif
