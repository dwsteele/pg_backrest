/***********************************************************************************************************************************
LZ4 Compress

Compress IO using the lz4 format.
***********************************************************************************************************************************/
#ifndef WITHOUT_LZ4

#ifndef COMMON_COMPRESS_LZ4_COMPRESS_H
#define COMMON_COMPRESS_LZ4_COMPRESS_H

/***********************************************************************************************************************************
Object type
***********************************************************************************************************************************/
typedef struct Lz4Compress Lz4Compress;

#include "common/io/filter/filter.h"
#include "common/type/buffer.h"

/***********************************************************************************************************************************
Constructor
***********************************************************************************************************************************/
Lz4Compress *lz4CompressNew(int level, bool raw);

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/
void lz4CompressProcess(Lz4Compress *this, const Buffer *uncompressed, Buffer *compressed);

/***********************************************************************************************************************************
Getters
***********************************************************************************************************************************/
bool lz4CompressDone(const Lz4Compress *this);
IoFilter *lz4CompressFilter(const Lz4Compress *this);
bool lz4CompressInputSame(const Lz4Compress *this);

/***********************************************************************************************************************************
Destructor
***********************************************************************************************************************************/
void lz4CompressFree(Lz4Compress *this);

/***********************************************************************************************************************************
Macros for function logging
***********************************************************************************************************************************/
String *lz4CompressToLog(const Lz4Compress *this);

#define FUNCTION_LOG_LZ4_COMPRESS_TYPE                                                                                             \
    Lz4Compress *
#define FUNCTION_LOG_LZ4_COMPRESS_FORMAT(value, buffer, bufferSize)                                                                \
    FUNCTION_LOG_STRING_OBJECT_FORMAT(value, lz4CompressToLog, buffer, bufferSize)

#endif

#endif // WITHOUT_LZ4
