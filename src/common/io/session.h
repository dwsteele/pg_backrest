/***********************************************************************************************************************************
Io Session Interface

!!!
***********************************************************************************************************************************/
#ifndef COMMON_IO_SESSION_H
#define COMMON_IO_SESSION_H

/***********************************************************************************************************************************
Object type
***********************************************************************************************************************************/
#define IO_SESSION_TYPE                                             IoSession
#define IO_SESSION_PREFIX                                           ioSession

typedef struct IoSession IoSession;

#include "common/io/read.h"
#include "common/io/write.h"

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/
// Close the session
void ioSessionClose(IoSession *this);

// Move to a new parent mem context
IoSession *ioSessionMove(IoSession *this, MemContext *parentNew);

/***********************************************************************************************************************************
Getters/Setters
***********************************************************************************************************************************/
// Read interface
IoRead *ioSessionIoRead(IoSession *this);

// Write interface
IoWrite *ioSessionIoWrite(IoSession *this);

/***********************************************************************************************************************************
Destructor
***********************************************************************************************************************************/
void ioSessionFree(IoSession *this);

/***********************************************************************************************************************************
Macros for function logging
***********************************************************************************************************************************/
#define FUNCTION_LOG_IO_SESSION_TYPE                                                                                                  \
    IoSession *
#define FUNCTION_LOG_IO_SESSION_FORMAT(value, buffer, bufferSize)                                                                     \
    objToLog(value, "IoSession", buffer, bufferSize)

#endif
